<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 5 Grammar Quiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 20px;
            background: #f8f9fa;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            background: white;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.2);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .content {
            padding: 30px;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .grammar-box {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .grammar-box h3 {
            color: #764ba2;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .grammar-box ul {
            list-style: none;
            padding-left: 0;
        }

        .grammar-box li {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .example {
            background: #fff9e6;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #ffc107;
        }

        .question {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .question:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
        }

        .question-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .question-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }

        .question-text {
            flex: 1;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .input-container {
            margin: 15px 0;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        input[type="text"].correct {
            border-color: #4caf50;
            background: #f1f8e9;
        }

        input[type="text"].incorrect {
            border-color: #f44336;
            background: #ffebee;
        }

        .check-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
        }

        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .show-answer-btn {
            background: #ff9800;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .show-answer-btn:hover {
            background: #f57c00;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 152, 0, 0.3);
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            display: none;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                max-height: 0;
            }
            to {
                opacity: 1;
                max-height: 200px;
            }
        }

        .feedback.correct {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            color: #2e7d32;
        }

        .feedback.incorrect {
            background: #ffebee;
            border-left: 4px solid #f44336;
            color: #c62828;
        }

        .feedback.hint {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            color: #e65100;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4caf50 0%, #8bc34a 100%);
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .score-display {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            margin: 20px 0;
        }

        .score-display h3 {
            color: #764ba2;
            margin-bottom: 10px;
        }

        .score-display .score {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .reset-btn {
            background: #9c27b0;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 20px auto;
            display: block;
        }

        .reset-btn:hover {
            background: #7b1fa2;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(156, 39, 176, 0.3);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.5em;
            }
            
            .navigation {
                padding: 15px;
            }
            
            .nav-btn {
                padding: 8px 15px;
                font-size: 0.9em;
            }
            
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Lesson 5 Grammar Quiz</h1>
            <p>ê°€ì •ë²• ê³¼ê±° & ì˜ë¬¸ì‚¬+toë¶€ì •ì‚¬</p>
        </div>

        <div class="navigation">
            <button class="nav-btn active" onclick="showSection('grammar')">ë¬¸ë²• ì •ë¦¬</button>
            <button class="nav-btn" onclick="showSection('checkup')">Check Up</button>
            <button class="nav-btn" onclick="showSection('level1')">Level 1</button>
            <button class="nav-btn" onclick="showSection('level2')">Level 2</button>
            <button class="nav-btn" onclick="showSection('score')">ì ìˆ˜ í™•ì¸</button>
        </div>

        <div class="content">
            <!-- Grammar Section -->
            <div id="grammar" class="section active">
                <div class="grammar-box">
                    <h3>A. ê°€ì •ë²• ê³¼ê±° (Past Subjunctive)</h3>
                    <ul>
                        <li><strong>í˜•íƒœ:</strong> If + ì£¼ì–´ + were/ë™ì‚¬ì˜ ê³¼ê±°í˜• ~, ì£¼ì–´ + ì¡°ë™ì‚¬ì˜ ê³¼ê±°í˜•(would/should/could/might) + ë™ì‚¬ì›í˜•</li>
                        <li><strong>ì˜ë¯¸:</strong> "ë§Œì•½ ~í•œë‹¤ë©´, ...í•  í…ë°" - í˜„ì¬ ì‚¬ì‹¤ê³¼ ë°˜ëŒ€ë˜ëŠ” ê°€ì •ì„ ë‚˜íƒ€ëƒ„</li>
                    </ul>
                    <div class="example">
                        <strong>ì˜ˆë¬¸:</strong><br>
                        If I were a bird, I would fly. (ë‚´ê°€ ìƒˆë¼ë©´, ë‚˜ëŠ” ë‚ ì•„ì˜¤ë¥¼ í…ë°.)<br>
                        If she had a flying carpet, she could travel all over the world. (ê·¸ë…€ê°€ ë‚ ì•„ë‹¤ë‹ˆëŠ” ì–‘íƒ„ìë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´, ì „ ì„¸ê³„ë¥¼ ì—¬í–‰í•  ìˆ˜ ìˆì„ í…ë°.)
                    </div>
                </div>

                <div class="grammar-box">
                    <h3>B. ì˜ë¬¸ì‚¬+toë¶€ì •ì‚¬ (Question Word + to-infinitive)</h3>
                    <ul>
                        <li><strong>when + to + ë™ì‚¬ì›í˜•:</strong> ì–¸ì œ ~í• ì§€</li>
                        <li><strong>how + to + ë™ì‚¬ì›í˜•:</strong> ì–´ë–»ê²Œ ~í• ì§€, ~í•˜ëŠ” ë°©ë²•</li>
                        <li><strong>where + to + ë™ì‚¬ì›í˜•:</strong> ì–´ë””ì„œ ~í• ì§€</li>
                        <li><strong>what + to + ë™ì‚¬ì›í˜•:</strong> ë¬´ì—‡ì„ ~í• ì§€</li>
                    </ul>
                    <div class="example">
                        <strong>ì˜ˆë¬¸:</strong><br>
                        We didn't know how to read music. (ìš°ë¦¬ëŠ” ì–´ë–»ê²Œ ì•…ë³´ë¥¼ ì½ëŠ”ì§€ ëª°ëë‹¤.)<br>
                        I told him when to feed the dog. (ë‚˜ëŠ” ì–¸ì œ ê°œì—ê²Œ ë¨¹ì´ë¥¼ ì¤„ì§€ ê·¸ì—ê²Œ ë§í–ˆë‹¤.)
                    </div>
                </div>
            </div>

            <!-- Check Up Section -->
            <div id="checkup" class="section">
                <h2>Check Up - ê¸°ë³¸ ë¬¸ë²• í™•ì¸</h2>
                
                <h3>A. ê°€ì •ë²• ê³¼ê±° - ë™ì‚¬ í˜•íƒœ</h3>
                <div class="question">
                    <div class="question-header">
                        <div class="question-number">1</div>
                        <div class="question-text">If it _____, I would put on the boots.</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="checkup-a-1" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('checkup-a-1', 'rained')">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('checkup-a-1', 'rained')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-checkup-a-1" class="feedback"></div>
                </div>

                <div class="question">
                    <div class="question-header">
                        <div class="question-number">2</div>
                        <div class="question-text">If I _____ a magic lamp, I would make three wishes.</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="checkup-a-2" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('checkup-a-2', 'had')">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('checkup-a-2', 'had')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-checkup-a-2" class="feedback"></div>
                </div>

                <div class="question">
                    <div class="question-header">
                        <div class="question-number">3</div>
                        <div class="question-text">If he _____ a policeman, he would help people.</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="checkup-a-3" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('checkup-a-3', 'were')">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('checkup-a-3', 'were')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-checkup-a-3" class="feedback"></div>
                </div>

                <h3>B. ì˜ë¬¸ì‚¬+toë¶€ì •ì‚¬</h3>
                <div class="question">
                    <div class="question-header">
                        <div class="question-number">1</div>
                        <div class="question-text">I don't know _____ _____ _____ next. (ë¬´ì—‡ì„ í•´ì•¼ í• ì§€)</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="checkup-b-1" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('checkup-b-1', 'what to do')">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('checkup-b-1', 'what to do')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-checkup-b-1" class="feedback"></div>
                </div>

                <div class="question">
                    <div class="question-header">
                        <div class="question-number">2</div>
                        <div class="question-text">Have you decided _____ _____ _____ for your vacation? (ì–´ë””ë¡œ ê°€ì•¼ í• ì§€)</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="checkup-b-2" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('checkup-b-2', 'where to go')">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('checkup-b-2', 'where to go')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-checkup-b-2" class="feedback"></div>
                </div>

                <div class="question">
                    <div class="question-header">
                        <div class="question-number">3</div>
                        <div class="question-text">He taught us _____ _____ _____ the machine. (ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼ í• ì§€)</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="checkup-b-3" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('checkup-b-3', 'how to use')">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('checkup-b-3', 'how to use')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-checkup-b-3" class="feedback"></div>
                </div>
            </div>

            <!-- Level 1 Section -->
            <div id="level1" class="section">
                <h2>Level 1 - ë¬¸ì¥ ì™„ì„±í•˜ê¸°</h2>
                
                <h3>A. ê°€ì •ë²• ê³¼ê±° ë¬¸ì¥ ì™„ì„±</h3>
                <div class="question">
                    <div class="question-header">
                        <div class="question-number">1</div>
                        <div class="question-text">ë§Œì•½ ë‚´ê°€ ì™•ì´ë¼ë©´, ë‚˜ëŠ” ì‚¬ëŒë“¤ì—ê²Œ ì„ ë¬¼ì„ ì¤„ í…ë°.<br>
                        â†’ If I _____ a king, I _____ _____ people presents.</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="level1-a-1" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: were, would give)">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('level1-a-1', 'were, would give', true)">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('level1-a-1', 'were, would give')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-level1-a-1" class="feedback"></div>
                </div>

                <div class="question">
                    <div class="question-header">
                        <div class="question-number">2</div>
                        <div class="question-text">ë§Œì•½ ëˆˆì´ ë§ì´ ë‚´ë¦°ë‹¤ë©´, ë‚˜ëŠ” ì‚°ì—ì„œ ìŠ¤í‚¤ë¥¼ íƒˆ í…ë°.<br>
                        â†’ If it _____ a lot, I _____ _____ in the mountains.</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="level1-a-2" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('level1-a-2', 'snowed, would ski', true)">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('level1-a-2', 'snowed, would ski')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-level1-a-2" class="feedback"></div>
                </div>

                <div class="question">
                    <div class="question-header">
                        <div class="question-number">3</div>
                        <div class="question-text">ë§Œì•½ ê·¸ê°€ ì—´ì‹¬íˆ ê³µë¶€í•œë‹¤ë©´, ì‹œí—˜ì— í•©ê²©í•  ìˆ˜ ìˆì„ í…ë°.<br>
                        â†’ If he _____ hard, he _____ _____ the exam.</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="level1-a-3" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('level1-a-3', 'studied, could pass', true)">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('level1-a-3', 'studied, could pass')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-level1-a-3" class="feedback"></div>
                </div>

                <h3>B. ì˜ë¬¸ì‚¬+toë¶€ì •ì‚¬ ë¬¸ì¥ ì™„ì„±</h3>
                <div class="question">
                    <div class="question-header">
                        <div class="question-number">1</div>
                        <div class="question-text">What should I do next? Dad, please tell me _____. (do)</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="level1-b-1" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswerMultiple('level1-b-1', ['what to do', 'what I should do'])">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('level1-b-1', 'what to do / what I should do')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-level1-b-1" class="feedback"></div>
                </div>

                <div class="question">
                    <div class="question-header">
                        <div class="question-number">2</div>
                        <div class="question-text">He's still in Seoul. He hasn't decided _____ for America. (leave)</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="level1-b-2" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswerMultiple('level1-b-2', ['when to leave', 'when he should leave'])">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('level1-b-2', 'when to leave / when he should leave')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-level1-b-2" class="feedback"></div>
                </div>
            </div>

            <!-- Level 2 Section -->
            <div id="level2" class="section">
                <h2>Level 2 - ê°€ì •ë²• ë¬¸ì¥ ì‘ì„± & ë¬¸ì¥ ë³€í™˜</h2>
                
                <h3>A. ê°€ì •ë²• ë¬¸ì¥ ì‘ì„±</h3>
                <div class="question">
                    <div class="question-header">
                        <div class="question-number">1</div>
                        <div class="question-text">ê·¸ê°€ í”¼ê³¤í•˜ì§€ ì•Šë‹¤ë©´, ë‚˜ì™€ í•¨ê»˜ ì‡¼í•‘ì„ ê°ˆ ìˆ˜ ìˆì„ í…ë°.<br>
                        â†’ _____</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="level2-a-1" placeholder="ì „ì²´ ë¬¸ì¥ì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('level2-a-1', 'If he weren\'t tired, he could go shopping with me.', false, true)">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('level2-a-1', 'If he weren\'t tired, he could go shopping with me.')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-level2-a-1" class="feedback"></div>
                </div>

                <div class="question">
                    <div class="question-header">
                        <div class="question-number">2</div>
                        <div class="question-text">ë‚´ê°€ ìœ ëª…í•˜ë‹¤ë©´, ë‚´ê°€ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ì˜í™”ë°°ìš°ì™€ ì‚¬ì§„ì„ ì°ì„ í…ë°.<br>
                        â†’ _____</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="level2-a-2" placeholder="ì „ì²´ ë¬¸ì¥ì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('level2-a-2', 'If I were famous, I would take photos with my favorite movie star.', false, true)">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('level2-a-2', 'If I were famous, I would take photos with my favorite movie star.')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-level2-a-2" class="feedback"></div>
                </div>

                <h3>B. ë¬¸ì¥ ë³€í™˜ (ì˜ë¬¸ì‚¬+toë¶€ì •ì‚¬)</h3>
                <div class="question">
                    <div class="question-header">
                        <div class="question-number">1</div>
                        <div class="question-text">I don't know what I should do.<br>
                        = I don't know _____.</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="level2-b-1" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('level2-b-1', 'what to do')">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('level2-b-1', 'what to do')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-level2-b-1" class="feedback"></div>
                </div>

                <div class="question">
                    <div class="question-header">
                        <div class="question-number">2</div>
                        <div class="question-text">They didn't decide when they should leave for the station.<br>
                        = They didn't decide _____.</div>
                    </div>
                    <div class="input-container">
                        <input type="text" id="level2-b-2" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    <button class="check-btn" onclick="checkAnswer('level2-b-2', 'when to leave for the station')">ì •ë‹µ í™•ì¸</button>
                    <button class="show-answer-btn" onclick="showAnswer('level2-b-2', 'when to leave for the station')">ë‹µ ë³´ê¸°</button>
                    <div id="feedback-level2-b-2" class="feedback"></div>
                </div>
            </div>

            <!-- Score Section -->
            <div id="score" class="section">
                <h2>í•™ìŠµ ì§„í–‰ ìƒí™©</h2>
                <div class="score-display">
                    <h3>í˜„ì¬ ì ìˆ˜</h3>
                    <div class="score">
                        <span id="correct-count">0</span> / <span id="total-count">0</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p id="score-percentage">ì •ë‹µë¥ : 0%</p>
                </div>
                <button class="reset-btn" onclick="resetQuiz()">í€´ì¦ˆ ì´ˆê¸°í™”</button>
            </div>
        </div>
    </div>

    <script>
        let correctAnswers = 0;
        let totalAnswered = 0;
        let answeredQuestions = new Set();

        // Sound effects using Web Audio API
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function playCorrectSound() {
            // Create a pleasant "ding" sound for correct answers
            const oscillator1 = audioContext.createOscillator();
            const oscillator2 = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator1.connect(gainNode);
            oscillator2.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator1.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
            oscillator2.frequency.setValueAtTime(659.25, audioContext.currentTime); // E5
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator1.start(audioContext.currentTime);
            oscillator2.start(audioContext.currentTime);
            oscillator1.stop(audioContext.currentTime + 0.5);
            oscillator2.stop(audioContext.currentTime + 0.5);
            
            // Add a second "ding" for emphasis
            setTimeout(() => {
                const osc3 = audioContext.createOscillator();
                const gain2 = audioContext.createGain();
                
                osc3.connect(gain2);
                gain2.connect(audioContext.destination);
                
                osc3.frequency.setValueAtTime(783.99, audioContext.currentTime); // G5
                gain2.gain.setValueAtTime(0.2, audioContext.currentTime);
                gain2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                osc3.start(audioContext.currentTime);
                osc3.stop(audioContext.currentTime + 0.3);
            }, 100);
        }

        function playIncorrectSound() {
            // Create a gentle "buzz" sound for incorrect answers
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.type = 'sawtooth';
            oscillator.frequency.setValueAtTime(150, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(100, audioContext.currentTime + 0.2);
            
            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.2);
            
            // Add a second lower tone
            setTimeout(() => {
                const osc2 = audioContext.createOscillator();
                const gain2 = audioContext.createGain();
                
                osc2.connect(gain2);
                gain2.connect(audioContext.destination);
                
                osc2.type = 'sine';
                osc2.frequency.setValueAtTime(80, audioContext.currentTime);
                
                gain2.gain.setValueAtTime(0.15, audioContext.currentTime);
                gain2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
                
                osc2.start(audioContext.currentTime);
                osc2.stop(audioContext.currentTime + 0.15);
            }, 50);
        }

        function playHintSound() {
            // Create a soft "whoosh" sound for hints
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            const filter = audioContext.createBiquadFilter();
            
            oscillator.connect(filter);
            filter.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.type = 'sine';
            filter.type = 'lowpass';
            filter.frequency.setValueAtTime(1000, audioContext.currentTime);
            filter.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.3);
            
            oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.3);
            
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        // Initialize audio context on first user interaction
        let audioInitialized = false;
        function initAudio() {
            if (!audioInitialized && audioContext.state === 'suspended') {
                audioContext.resume();
                audioInitialized = true;
            }
        }

        function showSection(sectionId) {
            initAudio();
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Update nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function normalizeAnswer(answer) {
            // Remove extra spaces and convert to lowercase
            return answer.toLowerCase().replace(/\s+/g, ' ').trim();
        }

        function checkAnswer(inputId, correctAnswer, allowPartial = false, isFullSentence = false) {
            const input = document.getElementById(inputId);
            const userAnswer = normalizeAnswer(input.value);
            const normalized = normalizeAnswer(correctAnswer);
            const feedback = document.getElementById(`feedback-${inputId}`);
            
            // Track if this question was already answered
            const wasAnswered = answeredQuestions.has(inputId);
            
            let isCorrect = false;
            
            if (allowPartial) {
                // For multiple-part answers (comma-separated)
                const userParts = userAnswer.split(',').map(s => s.trim());
                const correctParts = normalized.split(',').map(s => s.trim());
                isCorrect = userParts.length === correctParts.length && 
                           userParts.every((part, i) => part === correctParts[i]);
            } else if (isFullSentence) {
                // For full sentences, be more lenient with punctuation
                const userClean = userAnswer.replace(/[.,!?]/g, '');
                const correctClean = normalized.replace(/[.,!?]/g, '');
                isCorrect = userClean === correctClean;
            } else {
                isCorrect = userAnswer === normalized;
            }
            
            if (isCorrect) {
                input.classList.remove('incorrect');
                input.classList.add('correct');
                feedback.className = 'feedback correct';
                feedback.innerHTML = 'âœ… ì •ë‹µì…ë‹ˆë‹¤! í›Œë¥­í•´ìš”!';
                feedback.style.display = 'block';
                playCorrectSound(); // Play success sound
                
                if (!wasAnswered) {
                    correctAnswers++;
                    totalAnswered++;
                    answeredQuestions.add(inputId);
                    updateScore();
                }
            } else {
                input.classList.remove('correct');
                input.classList.add('incorrect');
                feedback.className = 'feedback incorrect';
                playIncorrectSound(); // Play error sound
                
                // Provide specific feedback based on the question type
                let errorMessage = 'âŒ í‹€ë ¸ìŠµë‹ˆë‹¤. ';
                
                if (inputId.includes('checkup-a')) {
                    errorMessage += 'ê°€ì •ë²• ê³¼ê±°ì—ì„œëŠ” ë™ì‚¬ì˜ ê³¼ê±°í˜•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. beë™ì‚¬ëŠ” ì£¼ì–´ì™€ ê´€ê³„ì—†ì´ "were"ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
                } else if (inputId.includes('checkup-b') || inputId.includes('level1-b')) {
                    errorMessage += 'ì˜ë¬¸ì‚¬ + to + ë™ì‚¬ì›í˜• í˜•íƒœë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.';
                } else if (inputId.includes('level1-a')) {
                    errorMessage += 'ê°€ì •ë²• ê³¼ê±° êµ¬ì¡°ë¥¼ í™•ì¸í•˜ì„¸ìš”: If + ì£¼ì–´ + ê³¼ê±°í˜•, ì£¼ì–´ + would/could + ë™ì‚¬ì›í˜•';
                } else if (inputId.includes('level2-a')) {
                    errorMessage += 'ê°€ì •ë²• ê³¼ê±° ë¬¸ì¥ êµ¬ì¡°ì™€ ë™ì‚¬ í˜•íƒœë¥¼ ë‹¤ì‹œ í™•ì¸í•´ë³´ì„¸ìš”.';
                } else if (inputId.includes('level2-b')) {
                    errorMessage += 'ì˜ë¬¸ì‚¬ì ˆì„ ì˜ë¬¸ì‚¬+toë¶€ì •ì‚¬ë¡œ ì¶•ì•½í•˜ëŠ” ë°©ë²•ì„ ë‹¤ì‹œ í™•ì¸í•´ë³´ì„¸ìš”.';
                }
                
                feedback.innerHTML = errorMessage;
                feedback.style.display = 'block';
                
                if (!wasAnswered) {
                    totalAnswered++;
                    answeredQuestions.add(inputId);
                    updateScore();
                }
            }
        }

        function checkAnswerMultiple(inputId, correctAnswers) {
            const input = document.getElementById(inputId);
            const userAnswer = normalizeAnswer(input.value);
            const feedback = document.getElementById(`feedback-${inputId}`);
            
            // Track if this question was already answered
            const wasAnswered = answeredQuestions.has(inputId);
            
            const isCorrect = correctAnswers.some(answer => 
                normalizeAnswer(answer) === userAnswer
            );
            
            if (isCorrect) {
                input.classList.remove('incorrect');
                input.classList.add('correct');
                feedback.className = 'feedback correct';
                feedback.innerHTML = 'âœ… ì •ë‹µì…ë‹ˆë‹¤! ë‘ ê°€ì§€ í˜•íƒœ ëª¨ë‘ ê°€ëŠ¥í•©ë‹ˆë‹¤.';
                feedback.style.display = 'block';
                playCorrectSound(); // Play success sound
                
                if (!wasAnswered) {
                    correctAnswers++;
                    totalAnswered++;
                    answeredQuestions.add(inputId);
                    updateScore();
                }
            } else {
                input.classList.remove('correct');
                input.classList.add('incorrect');
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = 'âŒ í‹€ë ¸ìŠµë‹ˆë‹¤. ì˜ë¬¸ì‚¬+toë¶€ì •ì‚¬ ë˜ëŠ” ì˜ë¬¸ì‚¬+ì£¼ì–´+should+ë™ì‚¬ì›í˜• í˜•íƒœë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
                feedback.style.display = 'block';
                playIncorrectSound(); // Play error sound
                
                if (!wasAnswered) {
                    totalAnswered++;
                    answeredQuestions.add(inputId);
                    updateScore();
                }
            }
        }

        function showAnswer(inputId, answer) {
            const feedback = document.getElementById(`feedback-${inputId}`);
            feedback.className = 'feedback hint';
            feedback.innerHTML = `ğŸ’¡ ì •ë‹µ: ${answer}`;
            feedback.style.display = 'block';
            playHintSound(); // Play hint sound
        }

        function updateScore() {
            document.getElementById('correct-count').textContent = correctAnswers;
            document.getElementById('total-count').textContent = totalAnswered;
            
            const percentage = totalAnswered > 0 ? Math.round((correctAnswers / totalAnswered) * 100) : 0;
            document.getElementById('score-percentage').textContent = `ì •ë‹µë¥ : ${percentage}%`;
            document.getElementById('progress-fill').style.width = `${percentage}%`;
        }

        function resetQuiz() {
            if (!confirm('ì •ë§ë¡œ í€´ì¦ˆë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  ë‹µì•ˆê³¼ ì ìˆ˜ê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.')) {
                return;
            }
            
            // Reset all inputs
            document.querySelectorAll('input[type="text"]').forEach(input => {
                input.value = '';
                input.classList.remove('correct', 'incorrect');
            });
            
            // Hide all feedback
            document.querySelectorAll('.feedback').forEach(feedback => {
                feedback.style.display = 'none';
            });
            
            // Reset scores
            correctAnswers = 0;
            totalAnswered = 0;
            answeredQuestions.clear();
            updateScore();
            
            // Go back to grammar section
            showSection('grammar');
            document.querySelector('.nav-btn').classList.add('active');
        }

        // Add enter key support for inputs and initialize audio
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize audio on first interaction
            document.addEventListener('click', initAudio, { once: true });
            document.addEventListener('keydown', initAudio, { once: true });
            
            document.querySelectorAll('input[type="text"]').forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const checkBtn = this.parentElement.nextElementSibling;
                        if (checkBtn && checkBtn.classList.contains('check-btn')) {
                            checkBtn.click();
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>